# Daemon

Commands for running and managing the Blobcache daemon, and querying the API endpoint.

## `blobcache daemon --state <dir> [--serve-http proto://addr] [--serve-unix path] [--net host:port]`
Runs the blobcache daemon using the state directory specified by `--state`.

### Flags
- `--state <dir>` The directory containing daemon state and configuration (required).
- `--serve-http <path>` Optional listener for the HTTP API.
  - Examples: `/tmp/blobcache.sock`
- `--serve-http <proto://addr>` Optional listener for the HTTP API.
  - Examples: `unix:///tmp/blobcache.sock`, `tcp://127.0.0.1:8080`
- `--net <host:port>` Optional UDP address for peer networking.
  - Example: `0.0.0.0:25156`, `127.0.0.1:0` (ephemeral port)

## `blobcache daemon-ephemeral [--serve-http proto://addr] [--serve-unix path] [--net host:port]`
Runs the daemon with a temporary state directory (deleted on exit).
Useful for testing or single-session usage.

## `blobcache daemon-validate --state <dir>`
Validates configuration under the given state directory and exits.
Prints a confirmation if configuration is valid.

## `blobcache show-access --state <dir> <peer> <oid>`
Shows the access rights granted to a peer for a given object identifier.

### Positional Arguments
- `peer` The PeerID (base64-encoded).
- `oid` The object identifier.

## Endpoint

### `blobcache endpoint`
Prints the endpoint the CLI is using to reach the daemon's API.

- The CLI reads the `BLOBCACHE_API` environment variable to determine the API endpoint.
- Supported formats include:
  - `unix:///path/to/socket` (UNIX domain socket)
  - `http://host:port` or `https://host:port`
- If `BLOBCACHE_API` is not set, a default endpoint is used.
